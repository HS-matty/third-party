			---------------------------------------
			Предисловие к скрипту Интернет-магазина
			---------------------------------------

	        //  техническая поддержка по адресу shop@vofka.ru  //

Содержание:
 1. Краткое описание работы магазина.
 2. Установка на Ваш компьютер.
 3. Установка на удаленный сервер.
 4. Структура базы данных.
 5. Файлы.

 -----------------------
 Краткое описание работы
 -----------------------

Скрипт написан на PHP с использованием MySQL.
Магазин состоит из 2-х частей: общедоступной и административной.
В первой производится регистрация, просмотр и заказ товаров регулярными пользователями.
А административная часть - часть, в которой возможно добавлять новые категории,
товары, вести учет над магазином. К ней имеет доступ только суперпользователь.
MANAGER - логин этого суперпользователя (соблюдая регистр - т.е. большими буквами).
Создайте такого пользователя пользуясь обычной регистрацией в общедоступной части.
По сути это такой же пользователь, как и остальные - за тем исключением, что у него еще есть
доступ к администраторской части магазина.
Все остальное он может делать как и обычный пользователь (изменять данные, делать заказы).
Все общение с покупателями делается от его имени и в качестве обратного адреса при общении по
электронной почте выступает именно его адрес.
Этот адрес (и другие данные) можно именить точно также, как это делает обычный пользователь
- щелкнув по ссылке 'Личные данные' в пользовательской части магазина.

 --------------------------
 Установка на Ваш компьютер
 --------------------------

У Вас должны быть установлены Apache, PHP4 и MySQL.

1. Скопируйте все файлы-скрипты и каталоги в директорию Вашего сервера.
2. Переместите каталог 'shop_data' в директорию mysql/data, в которой находятся Ваши базы данных MySQL и переименуйте
   эту директорию по Вашему усмотрению.
3. В файле cfg/connect.inc пропишите настройки подключения к базе данных
4. Пользуйтесь))

 -----------------------------
 Установка на удаленный сервер
 -----------------------------

1. Скопируйте все файлы-скрипты и каталоги в директорию Вашего удаленного сервера (FTP).
2. В файле cfg/connect.inc пропишите настройки подключения к базе данных
3. Зайдите в менеджер управления базой данных MySQL. Создайте новую базу данных. Назвать можете по своему усмотрению
   (тогда соответственно изменить $DB_NAME в файле connect.inc)...
4.   Запустите скрипт install.php
5. Теперь необходимо поставить право на чтение и запись у директорий goods_pictures, cfg для группы.
6. Закрыть директорию cfg для общего доступа. Делается это так: создайте в ней файл .htaccess со след. содержимым
   (если на сервере установлен Apache):

   Deny from all

7. Пользуйтесь))

 -----------
 База данных
 -----------

Используется СУБД MySQL, что оптимально подходит для решения такой задачи, как интернет-магазин.
Структура базы данных:
6 таблиц:

1. Categories: таблица категорий:
	+-------+--------+----------+-------------+
	|  CID  |  Name  |  Parent  | GoodsCount  |
	+-------+--------+----------+-------------+

	//в скобках указан тип поля
	CID (INT PRIMARY KEY AUTO_INCREMENT) - идентификатор категории (положительное число)
	Name (CHAR(30)) - название категории, которое видят пользователи
	Parent (INT) - идентификатор категории (CID), которая является "родителем" данной категории.
		Если значение Parent == 0, то данная категория является корневой
	GoodsCount (INT) - кол-во товаров, находящихся в данной категории и всех ее подкатегориях


2. GoodsList: здесь хранится информация о всех товарах:
	+-----+----+------+-------------+------------+-------+---------+-----------------+------+-------+------+
	| CID | ID | Name | Description | Popularity | Price | Picture | LeftInWareHouse | Icon | Votes | Sold |
	+-----+----+------+-------------+------------+-------+---------+-----------------+------+-------+------+

	CID (INT) - идентификатор категории, в которой лежит товар
	ID (INT PRIMARY KEY AUTO_INCREMENT) - идентификатор товара
	Name (CHAR(200)) - наименование товара
	Description (TEXT) - описание товара
	Popularity (FLOAT) - рейтинг/популярность товара, определяемый/ая пользователями в голосованиях
		при просмотре подробной информации о товаре
	Price (FLOAT) - цена
	Picture (CHAR(40)) - имя файла-фотографии товара. Все фотографии товаров закачиваются в директорию goods_pictures/ на сервере
	LeftInWareHouse (INT) - остаток товара на складе
	Icon (CHAR(40)) - имя файла-иконки товара. Все иконки товаров закачиваются в директорию goods_pictures/ на сервере
	Votes (INT) - кол-во проголосовавших за товар (в голосовании при просмотре подробной информации о товаре)
	Sold (INT) - кол-во проданных единиц товара

3. Users: здесь вся информация о пользователях
	+-------+----------+-------+---------+------+---------+-------+----------+
	| Login | Password | Email | Country | City | Address | Phone | Fullname |
	+-------+----------+-------+---------+------+---------+-------+----------+

	Login (CHAR(20)) - логин покупателя, с помощью которого он входит в магазин
	Password (CHAR(15)) - его пароль
	Email (CHAR(30)) - его эл. почта
	Country (CHAR(40)), City (CHAR(40)), Address (CHAR(50)), Phone (CHAR(20)), Fullname (CHAR(40)) - личные данные

4. Carts: в этой таблице хранятся товары, находящиеся в корзине зарегистрированного покупателя с логином User
	+------+-----+----------+
	| User | GID | Quantity |
	+------+-----+----------+

	User (CHAR(20)) - это логин пользователя, к корзине которого лежит Quantity (INT) единиц товара с идентификатором GID (INT)

5. Orders: таблица заказов
	+------+---------+---------+-----+
	| User | Payment | Comment | OID |
	+------+---------+---------+-----+

	User (CHAR(20)) - логин пользователя, совершившего заказ
	Payment (CHAR(20)) - тип оплаты
	Comment (CHAR(200)) - пожелания покупателя по доставке или чему-либо другому
	OID (INT PRIMARY KEY AUTO_INCREMENT) - идентификатор заказа

6. OrderedCarts: после того, как заказ оформлен, товары из корзины покупателя (таблицы Carts)
			переносим в таблицу OrderedCarts - эта таблица аналогична таблице Carts
			Значения OID в таблице Orders и OrderedCarts одинаковы для определенного заказа
	+-----+----------+-----+
	| GID | Quantity | OID |
	+-----+----------+-----+




 -----
 Файлы
 -----

Пользовательская часть магазина:

style.css - таблица стилей

head.incl - файл-заголовок (рисует верхнюю часть страницы: поиск, ссылки, логотип и т.д.)
		с некоторым набором функций: рекурсивный обход дерева категорий и пр.

index.php - главная страница. Здесь витрина, поиск товаров, показ товаров по категориям,
		показ подробной информации о товаре, вход для зарегистрированных пользователей

register.php - регистрация пользователей, изменение данных зарегистрированных покупателей,
		2ой этап оформления заказа (вход в магазин)

order.php - 1ый этап оформления заказа (проверка правильности заказа)

completeorder.php - 3ий этап оформления (комментарий + форма оплаты) + записать заказ в БД

cart.php - корзина покупателя


Администрирование:

functions.php - функция обновления кол-ва товаров в категории + ее подкатегориях

admin.php - главная страница администратора: управление новыми заказами, статистика,
		редктирование товаров, категорий, пользователей.

goods.php - редактирование/добавление/удаление товаров

categories.php - редактирование/добавление/удаление категорий

user.php - просмотр данных зарегистрированных пользователей, удаление пользователей

checklogin.php - проверка санкционированного входа в систему для зарегистрированных пользователей

cfg/connect.inc - файл с настройками подключения к базе данных

cfg/settings.inc - файл с настройками магазина (курс доллара, имя магазина и т.д.)



Copyright Вофка @ shop.vofka.ru ;)