2.07.2000
(win1251 encoded)
----------   WM HTTPS-interface example



1. Описание файлов примера
2. Инструкция по установке примера



1. Описание файлов примера автоматического управления кошельком webmoney
-------------------------------------------------------------------------

index.htm           - Главная страница. Отсюда вызываются все скрипты
prot_in1.htm        - Страница входа в защищенную зону
readme.txt          - Данный файл
cass.php            - Скрипт вывода элемента "Касса"
invc_chk.php        - Скрипт проверки состояния счета
invc_create.php     - Скрипт выписки счета
msg.php             - Скрипт посылки сообщения
prot_in2.php        - Скрипт проверки корректности входа в защищенную зону
trans_chk.php       - Скрипт проверки состояния денежного перевода
trans_create.php    - Скрипт проведения денежного перевода
trans_create_pr.php - Скрипт проведения денежного перевода с протекцией сделки
wmpurse_chk.php     - Скрипт проверки соответствия WM-кошелька WM-идентификатору

wm.inc       - модуль функций работы с https-интерфейсами webmoney.
               Его вы можете использовать в своих сайтах для упрощения
               ваших скриптов.
wmconst.inc  - модуль, содержащий константы вашего кошелька, а также постоянные
               параметры выписываемых скриптов

WMSigner.ini - файл настройки модуля WMSigner (здесь - только пример файла)
WMSigner     - НЕ ВХОДИТ В КОМПЛЕКТ. Поставляется в виде исходного кода.
               см. http://www.webmoney.ru/pfdevelhttp1s.shtml
               Модуль формирования электронной подписи



2. Инструкция по установке примера
-----------------------------------

Для того, чтобы заработал данный пример, необходимы следующие шаги :
 - установка требуемых модулей (cURL)
 - установка скриптов
 - установка WMSigner


   2.1 Установка требуемых модулей


Данный пример требует для своей работы установленный модуль PHP
cURL.
Данный модуль можно скачать с сайта производителя - http://curl.haxx.se
Также информация о нем доступна с сайта PHP, по адресу
http://www.php.net/manual/en/ref.curl.php.


   2.2 Установка скриптов


Для этого вы должны расположить файлы этого примера в директории, доступной
вашему http-серверу.
Достаточно просто скопировать файлы данного примера на сервер.


   2.3 Установка WMSigner


Последним этапом является настройка модуля WMSigner.
Для этого необходимо скачать исходный код модуля.
Ссылку на исходный код вы можете найти на страничке
http://www.webmoney.ru/pfdevelhttp1s.shtml

Скачав исходный код и распаковав zip-архив cкомпилируйте его, выполнив
следующие команды :

chmod a+x ./compl.sh
./compl.sh

В результате будет создан выполняемый модуль WMSigner.
В процессе компиляции могут возникнуть ошибки - установите требуемые
компилятором библиотеки, или же свяжитесь со службой поддержки.
На большинстве систем компиляция проходит нормально.


После чего созданный файл WMSigner перепишите в директорию вашего сервера, 
и дайте на него права выполнения следующей командой :

chmod a+x ./WMSigner

Следующий шаг - создание файла WMSigner.ini
Он описывает ваш WM-идентификатор, и содержит, по строкам :
wm идентификатор
пароль к нему
путь с именем файла ключей

Пример :
012345678901
pass
./keys.kwm

Необходимо на него поставить право на чтение
(WMSigner должен иметь право прочесть его).
Поскольку WMSigner будет запускаться http-сервером, можно ставить права на
чтение всем :

chmod a+r ./WMSigner.ini

Проверить работоспособность WMSigner-а можно из консоли, запустив его, и 
введя какой-нибудь текст. Пример :
$ ./WMSigner
,schdhglkjgvhndlgf<enter>
<ctrl-d>923642a9898f98798c23d5678e23498c98a42c46527...
        ^^^^^^
         этот текст уже выведет WMSigner

Если же вы не получили строки из цифр и символов - значит что-то не так.
Если он выводит ошибку - значит вы неправильно настроили файл WMSigner.ini,
либо имеете некорректный файл ключей.


В случае, если все нормально - можно запускать пример.



С вопросами обращайтесь на unix_support@webmoney.ru